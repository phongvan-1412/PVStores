@model List<BillDetailViewModels>
@using Microsoft.Extensions.Options
@inject IOptions<WebApplication1.Utilities.StripeSettings> Stripe
@Html.Partial("~/Views/Shared/_HeaderInnerPagePartial.cshtml")

<main id="main">
    <section class="breadcrumbs">
        <div class="container">

            <div class="d-flex justify-content-between align-items-center">
                <h2>Category</h2>
                <ol>
                    <li><a href="/Home/Index">Home</a></li>
                    <li><a href="/Category/Index"></a>Category</li>
                </ol>
            </div>

        </div>
    </section>

    <section class="inner-page">
        <div class="container position-relative">
            <table class="table table-borderless text-white">
                <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">Image</th>
                        <th scope="col">Product Name</th>
                        <th scope="col">Price</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Total</th>
                    </tr>

                </thead>

                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <th scope="row" class="align-middle">
                                @{
                                    var index = Model.IndexOf(item) + 1;
                                }@index
                            </th>

                            <td>
                                <img src="~/img/products/@item.ProductImage" style="width: 178px; height: 178px" />
                            </td>
                            <td class="align-middle">@item.ProductName</td>
                            <td class="align-middle">$@item.Price</td>
                            <td class="align-middle">@item.Quantity</td>
                            <td class="align-middle fw-semibold" style="color: #cda45e">$@item.Total</td>
                        </tr>
                    }
                </tbody>
            </table>

            <form asp-controller="Cart" asp-action="CheckOut" method="post">
                <span class="d-flex text-end fw-semibold" style="font-size: 25px">
                    Payment:
                    <span class="ms-5" style="color: #cda45e; font-size: 25px">
                        $@Model.Sum(p => p.Total)
                    </span>
                </span>
                <a asp-controller="Cart" asp-action="CheckOut" asp-route-id="" class="position-absolute btn btn-outline-primary text-white p-2 mb-5" style="right: .5rem">
                    Check Out
                </a>

                <script type="text/javascript"
                        src="//checkout.stripe.com/v2/checkout.js"
                        class="stripe-button"
                        data-key="@Stripe.Value.Publishablekey"
                        data-locale="auto"
                        data-description="Sample Charge">

                </script>

            </form>

        </div>
    </section>
</main>